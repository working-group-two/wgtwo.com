<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">The worst message in telecom (you won&#x27;t believe) | Working Group Two</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://www.wgtwo.com/blog/the-worst-message-in-telco/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="og:description" content="We help mobile operators innovate at scale, reduce cost and dive into new revenue streams - by building a mobile core network from the ground up and delivering it as-a-service."><meta data-rh="true" name="og:image" content="/img/wgtwo-logo.png"><meta data-rh="true" name="keywords" content="mvne, private network, epc, 5G core, mvno, IMS core, mobile core, evolved packet core epc, mvno core, core as a service&#x27;"><meta data-rh="true" property="og:title" content="The worst message in telecom (you won&#x27;t believe) | Working Group Two"><meta data-rh="true" name="description" content="Sorry for the click-bait title, I couldn&#x27;t resist."><meta data-rh="true" property="og:description" content="Sorry for the click-bait title, I couldn&#x27;t resist."><meta data-rh="true" property="og:image" content="https://www.wgtwo.com/assets/images/pengar_i_telefontornet-98aea8531503e9eb8f8feea13f256f4c.png"><meta data-rh="true" name="twitter:image" content="https://www.wgtwo.com/assets/images/pengar_i_telefontornet-98aea8531503e9eb8f8feea13f256f4c.png"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-05-17T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://www.linkedin.com/in/sebastian-weddmark-olsson/"><meta data-rh="true" property="article:tag" content="telco,diameter,credit-control,charging"><link data-rh="true" rel="icon" href="/img/favicons/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.wgtwo.com/blog/the-worst-message-in-telco/"><link data-rh="true" rel="alternate" href="https://www.wgtwo.com/blog/the-worst-message-in-telco/" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.wgtwo.com/jp/blog/the-worst-message-in-telco/" hreflang="jp"><link data-rh="true" rel="alternate" href="https://www.wgtwo.com/blog/the-worst-message-in-telco/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Working Group Two RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Working Group Two Atom Feed">



<!-- Google Tag Manager -->
    <script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-N4969FH",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>
    <!-- End Google Tag Manager --><link rel="stylesheet" href="/assets/css/styles.559cfa0f.css">
<link rel="preload" href="/assets/js/runtime~main.9507be87.js" as="script">
<link rel="preload" href="/assets/js/main.e72d4781.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#000000;color:#b8b8b8" role="banner"><div class="content_knG7 announcementBarContent_xLdY"><a class="announcementBarLinkContainer" target="_blank" href="https://blogs.cisco.com/news/cisco-announces-intent-to-acquire-working-group-two"><img src="/img/cisco.png"><b>Working Group Two is now part of Cisco</b><span class="separator"> | </span><span>Learn more →</span></a></div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="wgtwo Logo" class="themedImage_ToTc themedImage--light_HNdA" height="32px" width="191px"><img src="/img/logo_white.svg" alt="wgtwo Logo" class="themedImage_ToTc themedImage--dark_i4oU" height="32px" width="191px"></div></a><a class="navbar__item navbar__link" target="_self" href="/technology/">Technology</a><a class="navbar__item navbar__link" target="_self" href="/product-ecosystem/">Product Ecosystem</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Showcase</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/showcase/mobi/">Mobi (MVNO/MNO)</a></li><li><a class="dropdown__link" href="/showcase/ckh-iod/">CKH IOD (MVNE)</a></li><li><a class="dropdown__link" href="/showcase/telenorconnexion/">Telenor Connexion (IoT)</a></li><li><a class="dropdown__link" href="/showcase/mki/">MKI (Private Networks)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/blog/">Blog</a><a class="navbar__item navbar__link sign-up" href="/contact/">Talk to us</a><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link localeDropdown"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/blog/the-worst-message-in-telco/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/jp/blog/the-worst-message-in-telco/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="jp">日本語</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 blogBackground_WB8r"><div class="container margin-vert--lg"><div class="row"><main class="col col8_DrcQ colOffset1_fYNX singleBlogPageView_LeVK" itemscope="" itemtype="http://schema.org/Blog"><div style="position:fixed;height:4px;background-color:#edf6fa;z-index:999;width:100%;top:0;left:0"><div style="background-color:#93ddff;transition:all 0.5s ease-out;width:0%;height:100%"></div></div><article class="articleContainer_Rf03" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="https://www.wgtwo.com/assets/images/pengar_i_telefontornet-98aea8531503e9eb8f8feea13f256f4c.png"><header class="articleCardHeader_doJu"><h1 class="title_xvU1" itemprop="headline">The worst message in telecom (you won&#x27;t believe)</h1><div class="container_iJTo margin-vert--md"><div class="dateContainer_S5xq"><time datetime="2023-05-17T00:00:00.000Z" itemprop="datePublished">May 17, 2023</time> · <!-- -->11 min read</div><div class="iconsContainer_WcqX"><button class="button_jnFd"><svg height="500" width="500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 500" class="icon_K6Vf"><path d="M50 0C22.3 0 0 22.3 0 50v400c0 27.7 22.3 50 50 50h400c27.7 0 50-22.3 50-50V50c0-27.7-22.3-50-50-50H50zm89.906 105.781c19.182 0 34.719 15.537 34.719 34.719 0 19.182-15.537 34.75-34.719 34.75-19.182 0-34.719-15.568-34.719-34.75 0-19.182 15.537-34.719 34.72-34.719zm181.875 90.438c3.922.014 7.925.199 13.313.531 26.184 1.615 55.36 22.08 56.219 70.031.706 39.493.5 102.081.5 125.125H332.28c0-23.574.25-72.274.25-106.719 0-15.672-7.035-36.75-32.094-36.75-27.597 0-34.312 25.645-34.312 36.75 0 33.074-.281 85.752-.281 106.72h-59.188c0-35.345.375-156.654.375-190.907 30.568 0 45.191-.063 56.375-.063 0 11.218-.094 18.722-.094 26.907 9.337-18.852 34.832-30.655 45.75-31.219 4.98-.257 8.797-.42 12.72-.406zm-211.594 5.531h59.344v190.063h-59.344V201.75z" style="fill-opacity:1;fill-rule:nonzero"></path></svg></button><button class="button_jnFd"><svg xmlns="http://www.w3.org/2000/svg" height="56.693" width="56.693" viewBox="0 0 56.693 56.693" xml:space="preserve" class="icon_K6Vf"><rect width="100%" height="100%" fill="none"></rect><g class="currentLayer"><title>Layer 1</title><path d="M56.237 11.546a22.859 22.859 0 0 1-6.598 1.809 11.509 11.509 0 0 0 5.051-6.357 22.997 22.997 0 0 1-7.295 2.79 11.473 11.473 0 0 0-8.385-3.629c-6.344 0-11.488 5.144-11.488 11.489 0 .899.101 1.775.298 2.618-9.548-.48-18.014-5.053-23.68-12.004a11.43 11.43 0 0 0-1.555 5.777c0 3.985 2.027 7.502 5.11 9.562a11.456 11.456 0 0 1-5.204-1.438v.145c0 5.565 3.96 10.208 9.215 11.265a11.55 11.55 0 0 1-5.189.195c1.463 4.564 5.705 7.887 10.732 7.979A23.047 23.047 0 0 1 2.98 46.665c-.926 0-1.841-.055-2.74-.161a32.51 32.51 0 0 0 17.61 5.161c21.132 0 32.687-17.505 32.687-32.686 0-.498-.01-.995-.032-1.488a23.268 23.268 0 0 0 5.731-5.945z" class="selected"></path></g></svg></button><button class="button_jnFd"><svg xmlns="http://www.w3.org/2000/svg" width="256" height="256" viewBox="0 0 256 256" class="icon_K6Vf"><rect width="100%" height="100%" fill="none"></rect><g class="currentLayer"><title>Layer 1</title><path fill="none" d="M0 0h256v256H0z"></path><path d="M255.429 115.27a33.99 33.99 0 0 0-56.19-25.705c-17.844-9.453-39.088-15.189-61.287-16.464l5.523-33.14 23.156 3.612a25.705 25.705 0 1 0 2.655-16.783l-31.547-4.886a8.497 8.497 0 0 0-9.666 7.01l-7.329 44.081c-23.155.956-45.46 6.692-64.049 16.57a33.99 33.99 0 0 0-45.249 50.666 65.218 65.218 0 0 0-2.443 17.526c0 23.262 12.746 45.037 36.008 61.076s51.728 23.899 82.956 23.899 60.65-8.498 82.957-23.9 36.007-37.813 36.007-61.075a63.837 63.837 0 0 0-2.443-17.42 34.415 34.415 0 0 0 10.94-25.067zM68.485 145.011a16.995 16.995 0 1 1 16.995 16.995 16.995 16.995 0 0 1-16.995-16.995zm98.464 54.277a85.08 85.08 0 0 1-77.964 0 8.497 8.497 0 0 1 7.754-15.082 68.192 68.192 0 0 0 62.456 0 8.497 8.497 0 0 1 7.754 15.082zm3.505-37.282a16.995 16.995 0 1 1 16.995-16.995 16.995 16.995 0 0 1-16.995 16.995z"></path></g></svg></button><span class="spacer_N6vp">|</span><button class="button_jnFd"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="icon_K6Vf iconLink_fFIC"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"></path></svg></button></div></div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_q4o9"><div class="avatar margin-bottom--sm"><a href="https://www.linkedin.com/in/sebastian-weddmark-olsson/" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/author-photos/swo.jpg" alt="Sebastian Weddmark Olsson"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name undefined"><a href="https://www.linkedin.com/in/sebastian-weddmark-olsson/" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Sebastian Weddmark Olsson</span></a></div><small class="avatar__subtitle undefined" itemprop="description" title="Tech Lead for Session Management &amp; Protocol Termination">Tech Lead for Session Management &amp; Protocol Termination</small></div></div></div></div></header><div id="__blog-post-container" class="markdown articleContent_wrOu" itemprop="articleBody"><p>Sorry for the click-bait title, I couldn&#x27;t resist.</p><p>In this blog post I will describe online charging and go in depth on
the Credit-Control message, what it is used for, what it contains, and
where it is sent.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-charging">What is charging?<a href="#what-is-charging" class="hash-link" aria-label="Direct link to What is charging?" title="Direct link to What is charging?">​</a></h2><p>If you (as a user of telephone services, aka subscriber) want to make a
phone call, send SMS or use data services, then your operator wants to
know that you are able to pay for that action. This is called
charging, the method of collecting and checking the number of used
service units.</p><p>There is also the concept of billing that often goes hand in hand:
Invoicing you for those charged services units.</p><p>There are multiple plans which you can have, for instance you might
have a prepaid SIM-card where you top up your saldo in advance, or you
might have a subscription plan which allows for some services for a
fixed price.</p><p>The operators might handle the user&#x27;s session with regards to charging
in two ways. Either they are using offline charging, or an online
charging system.</p><p>Offline charging cannot affect user sessions in real time, it
calculates the charging records after the session is finished and updates
the user&#x27;s values. For instance you might get the invoice after the
month finishes with the cost of your usage.  In order to send the
invoice, the operator need to collect records of the user&#x27;s usage,
these records are called Charging Detail Records, and acronymed CDRs.
The CDRs are sent from all the parts of the network that handles the
user&#x27;s session. For instance the SMSGW node is collecting CDRs for
SMS-usage, a PGW for Data-usage, etc.</p><p>The other way is to have a online charging setup, where all the telco
nodes need to ask for credits at the moment the user is using the
services. The system that gets the request is called an Online
Charging System, or OCS in telco-lingo, and resides at the operator
control.  It is called online charging because it can actively affect
the user session in real time, i.e. block or allow user actions based
on the values and calculations in the OCS. The different systems sends
a request toward the OCS asking for some action, e.g. SMSGW might ask
the OCS if the user has credits enough to send a message.</p><p>Basically the OCS is a database storing information about prices of
the operators services, as well as keeping track of the user&#x27;s credits.</p><p>The pricing is based per operator and could go for example something
like this</p><ul><li>100 free SMSes, after that 1 SEK per SMS</li><li>60 free voice minutes, then 5:50 SEK per minute</li><li>1 GB free data transfered per week</li></ul><p>All operators have different pricing models in order to compete with
each other, not one model fits all etc. Therefore the OCS node has a
lot of configuration parameters it can set. For instance if a
subscriber uses up all available data, should she be directed to a
top-up page to buy more data, or should the data usage be blocked or
rate-limited, and if she doesn&#x27;t use up all data, should the remaining
data be added to a future pot, available only next period or until
used up?</p><p><img loading="lazy" alt="The OCS in the network" src="/assets/images/ocs-in-network-f01d53d26d1700078456fae92dff3864.svg" width="1436" height="1096" class="img_ev3q"></p><p>This picture shows how you the subscriber and the OCS are located in
the network. Your phone connects to the antennas of the visiting
network. The visiting network is the network that owns the antennas
and spectrums, aka mobile network operator or MNO. In Sweden, it is one
of Telia, Tele2, Telenor, or Tre. In Germany it is Telekom, O2, or
Vodafone. Wikipedia has
<a href="https://en.wikipedia.org/wiki/List_of_mobile_network_operators#By_region" target="_blank" rel="noopener noreferrer">lists</a>
if you want to check your country&#x27;s MNOs.</p><p>When using one of the services provided, a bunch of requests are sent
from the visiting network to your home network, i.e. your operators
network. This network <em>could</em> be the same network as the visiting
network, but it doesn&#x27;t have to. For instance if you have a Telenor
SIM-card, you could be in Telenors network if you are in Sweden, but
you could be in Telekoms network roaming if in Germany, or you could
have a Vimla SIM-card, which is an Swedish MVNO (virtual operator;
meaning they don&#x27;t have their own licence for the radio bands, but
they have an agreement with Telenor to use their network.). It gets
complicated quickly and I&#x27;ve only mentioned the visiting and home
network (there are others, e.g. interrogating network).</p><p>Between the networks there are nodes called Signal Transfer Point
(STP) or Diameter Relay Agents (DRA), depending on which technology
you use. Their purpose are to connect between networks and route
messages between nodes. You can think of it as routers with advance
functionality for some specific protocols. I&#x27;m not going to go into
this much deeper, but I&#x27;ll do mention some of the interfaces. I&#x27;ll
start with the CAMEL interface (more specifically between the gsmSCF
<!-- -->[GSM Service Control Function]<!-- --> and gsmSSF <!-- -->[GSM Service Switching
Function]<!-- -->).</p><p>CAMEL (Customized Applications for Mobile networks Enhanced Logic)
make it possible for a home network to receive updates of it&#x27;s users
actions. As an example, when you start a call, the visiting network
will use CAMEL to send an InitialDP (user has entered a detection
point) message to the home network. The home network will then respond
with either Continue or Connect (if it accept the action) which lets
the user and visiting network to continue to set up the call, or the
home network can send a ReleaseCall message which denies the call to
be set up (or disconnects if the call is already set up).</p><p>In our setup (as in Working Group Two setup), the OCS is managed by a
third party, a partner with us and our customer, and so there are DRAs
connecting the third party network with our network as well.</p><p>The home network will apply online charging by sending
Credit-Control-Request messages to the OCS, which will lookup the
subscriber and the subscribers credits, and set the corresponding
pricing.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-the-problem">What is the problem?<a href="#what-is-the-problem" class="hash-link" aria-label="Direct link to What is the problem?" title="Direct link to What is the problem?">​</a></h2><p>Disclaimer: These are all my personal thoughts, and there are probably
reasons the interface and messages are designed the way they are, that
I yet don&#x27;t grasp.</p><p>In my opinion there are too many different usages and definitions for
the Credit-Control message, it is to general and reused in too many
different cases.</p><p>First out is the network interfaces. An interface is the definition of
how nodes talk to each other. It usually specifies which nodes are
involved, and which messages are allowed.  For instance the Ro
interface contains Credit-Control messages for SMS, MMS and voice
calls, between the IP Multimedia Subsystem (IMS) and the OCS.  There
is also the Gy interface between the Packet Gateway (PGW) and the OCS,
which also carries Credit-Control messages for data usage. As well as
the Gx interface which carries Credit-Control messages for... policy
control between PGW and the Policy and charging rules function (PCRF)
to create service session level policy decisions.</p><p><img loading="lazy" alt="Different OCS interfaces" src="/assets/images/ocs-interfaces-26412fcf4ea0cde2eaa5b160bd71bd95.svg" width="645" height="588" class="img_ev3q"></p><table><thead><tr><th>Interface</th><th>Application-ID</th><th>Description</th><th>Nodes involved</th></tr></thead><tbody><tr><td>Base</td><td>4</td><td>Diameter Credit-Control Application</td><td>Any: Credit-Control Client/Server</td></tr><tr><td>Ro</td><td>4</td><td>Online charging for SMS, MMS, voice calls</td><td>IMS (CSCF), OCS</td></tr><tr><td>Gy</td><td>4</td><td>Online charging for data services</td><td>PGW (PCEF), OCS</td></tr><tr><td>Gx</td><td>16777238</td><td>Policy control for data and voice services</td><td>PGW (PCEF), PCRF</td></tr></tbody></table><p>So even if we only focus on application for online charging, i.e. with
Application-ID set to 4, then we have the specifications for the
Credit-Control message.  There are multiple specifications, the base
Diameter defined in RFC4006, which can be used for any Diameter
application which would want to have online charging functions, as
well as the 3GPP (Telco) defined in TS 32.299, for how online charging
should work in telecommunication applications like the ones above.
3GPP TS 32.299 is actually split up into multiple specifications
depending on which service or context used, each defines a number of
&quot;allowed fields&quot; from TS 32.299 for the context.</p><p>E.g.
3GPP TS 32.251 for PS charging,
3GPP TS 32.253 for CPDT charging,
3GPP TS 32.254 for Exposure function API charging,
3GPP TS 32.260 for IMS charging,
3GPP TS 32.270 for MMS service charging,
3GPP TS 32.271 for LCS service charging,
3GPP TS 32.272 for PoC service charging,
3GPP TS 32.273 for MBMS service charging,
3GPP TS 32.274 for SMS service charging,
3GPP TS 32.275 for MMTel service charging,
3GPP TS 32.276 for VCS charging,
3GPP TS 32.277 for ProSe charging,
3GPP TS 32.278 for Monitoring Event charging,
3GPP TS 32.280 for AoC Service Information, and
3GPP TS 32.296 for ABMF Rc information</p><p>The Diameter base specification for credit-control RFC4006, and the
Telecom online charging specification 3GPP TS 32.299 specifications
are similar but different, let us compare the top fields in the
<code>Request</code> messages in Diameter dictionary form:</p><div class="ccravps_lxWl"><table><thead><tr><th>Base Credit-Control-Request</th><th>3GPP TS 32.299 Credit-Control-Request</th></tr></thead><tbody><tr><td>&lt; Diameter Header: 272, REQ, PXY &gt;</td><td>&lt; Diameter Header: 272, REQ, PXY &gt;</td></tr><tr><td>&lt; Session-Id &gt;</td><td>&lt; Session-Id &gt;</td></tr><tr><td>{ Origin-Host }</td><td>{ Origin-Host }</td></tr><tr><td>{ Origin-Realm }</td><td>{ Origin-Realm }</td></tr><tr><td>{ Destination-Realm }</td><td>{ Destination-Realm }</td></tr><tr><td>{ Auth-Application-Id }</td><td>{ Auth-Application-Id }</td></tr><tr><td>{ Service-Context-Id }</td><td>{ Service-Context-Id }</td></tr><tr><td>{ CC-Request-Type }</td><td>{ CC-Request-Type }</td></tr><tr><td>{ CC-Request-Number }</td><td>{ CC-Request-Number }</td></tr><tr><td>[ Destination-Host ]</td><td>[ Destination-Host ]</td></tr><tr><td>[ User-Name ]</td><td>[ User-Name ]</td></tr><tr><td>[ CC-Sub-Session-Id ]</td><td></td></tr><tr><td>[ Acct-Multi-Session-Id ]</td><td></td></tr><tr><td>[ Origin-State-Id ]</td><td>[ Origin-State-Id ]</td></tr><tr><td>[ Event-Timestamp ]</td><td>[ Event-Timestamp ]</td></tr><tr><td>*<!-- -->[ Subscription-Id ]</td><td>*<!-- -->[ Subscription-Id ]</td></tr><tr><td>[ Service-Identifier ]</td><td></td></tr><tr><td>[ Termination-Cause ]</td><td>[ Termination-Cause ]</td></tr><tr><td>[ Requested-Service-Unit ]</td><td></td></tr><tr><td>[ Requested-Action ]</td><td>[ Requested-Action ]</td></tr><tr><td></td><td>[ AoC-Request-Type ]</td></tr><tr><td>*<!-- -->[ Used-Service-Unit ]</td><td></td></tr><tr><td>[ Multiple-Services-Indicator ]</td><td>[ Multiple-Services-Indicator ]</td></tr><tr><td>*<!-- -->[ Multiple-Services-Credit-Control ]</td><td>*<!-- -->[ Multiple-Services-Credit-Control ]</td></tr><tr><td>*<!-- -->[ Service-Parameter-Info ]</td><td></td></tr><tr><td>[ CC-Correlation-Id ]</td><td>[ CC-Correlation-Id ]</td></tr><tr><td>[ User-Equipment-Info ]</td><td>[ User-Equipment-Info ]</td></tr><tr><td></td><td>[ OC-Supported-Features ]</td></tr><tr><td>*<!-- -->[ Proxy-Info ]</td><td>*<!-- -->[ Proxy-Info ]</td></tr><tr><td>*<!-- -->[ Route-Record ]</td><td>*<!-- -->[ Route-Record ]</td></tr><tr><td></td><td>[ Service-Information ]</td></tr><tr><td>*<!-- -->[ AVP ]</td><td>*<!-- -->[ AVP ]</td></tr></tbody></table></div><p>A quick guide on how to read this:</p><ul><li><code>&lt; AVP &gt;</code> indicates a mandatory Attribute-Value Pair with a fixed position in the message.</li><li><code>{ AVP }</code> indicates a mandatory Attribute-Value Pair in the message.</li><li><code>[ AVP ]</code> indicates an optional Attribute-Value Pair in the message.</li><li><code>*AVP</code> indicates that multiple occurrences of an Attribute-Value Pair is possible.</li></ul><p>Each <a href="https://en.wikipedia.org/wiki/Name%E2%80%93value_pair" target="_blank" rel="noopener noreferrer">Attribute-Value
Pairs</a> contain
information over each field in the message, and they can contain deep
structure with multiple (grouped) fields.</p><p>The last field named <code>*[ AVP ]</code> actually means that the message can
contain other arbitrary AVPs that are not mentioned, defined by the sender.</p><p>To comment on this, the messages are similar, but not compatible with
each other. The same goes for the comparison of the
sub-specifications, e.g. 3GPP TS 32.260 for IP multimedia subsystem
(IMS) charging, and 3GPP TS 32.276 for Voice Call Services (VCS)
charging; they are similar but not compatible.</p><p>We&#x27;ve just scratched the surface of these messages and applications,
but I&#x27;m already tired.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>Online charging as a concept is great to have in the portfolio, I
believe. My concern is that some of the telco protocols seem to be
have written by the same people behind the AUTOSAR specification.
Ambiguous, hard to understand, too many fields and different
interfaces, and vendors that does different things on top of it to get
their things to work...</p><p>(Sorry for being harsh to the people designing this, it&#x27;s probably not
that easy).</p><p>The issue is that this interface is not expected to be an interconnect
interface, meaning the operator owns the OCS system and can decide to
send whatever works internal in their own network for their own use
cases.</p><p>What I would&#x27;ve liked is to split the messages and applications. 3GPP
online charging to get a separate application-id from base diameter
credit-control. Deprecation of TS 32.299 in favor of the context-based
specifications. It is too much things that happen in the current
protocol, specifications and messages.</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/telco/">telco</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/diameter/">diameter</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/credit-control/">credit-control</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/charging/">charging</a></li></ul></div><div class="col sharingSection_o4gn col--3"><button aria-haspopup="true" aria-expanded="false" type="button" class="szh-menu-button sharingButton__GCX"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sharingIcon_aNi7"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line></svg></button></div><div class="col margin-top--sm"><a href="https://github.com/working-group-two/wgtwo.com/edit/main/blog/../blog/2023-05-17-the-worst-message-in-telecom/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/wg2-volte-for-iot/"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">WG2 to deliver voice over 4G (VoLTE) for IoT solutions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/iso27001/"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Achieving ISO 27001:2022 Certification: What You Need to Know</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-charging" class="table-of-contents__link toc-highlight">What is charging?</a></li><li><a href="#what-is-the-problem" class="table-of-contents__link toc-highlight">What is the problem?</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Product</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docs.wgtwo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://console.wgtwo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Console Login<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/implementation/">Implementation</a></li><li class="footer__item"><a href="https://support.wgtwo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Customer Support<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/privacy/">Privacy Notice</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/about/introduction/">About</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/blog/">Blog</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/case-studies/mvnx/">Case Studies</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/team/">Team</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/terms-of-use/">Terms of Use</a></li><li class="footer__item"><a href="https://jobs.cisco.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.wgtwo.com/jp" target="_blank" rel="noopener noreferrer" class="footer__link-item">wgtwo.com/jp 合同会社<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Security</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/security/">Security Overview</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/technology/security-whitepaper/">Security Whitepaper</a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/security/responsible-disclosure/">Responsible Disclosure</a></li><li class="footer__item"><a href="https://trust.wgtwo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trust Report<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" target="_self" href="/docs/about/media-and-analysts/">Media &amp; Analysts</a></li><li class="footer__item"><a href="https://www.youtube.com/@workinggrouptwo2286" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/workinggrouptwo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/working-group-two" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://linkedin.com/company/wgtwo" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" target="_self" href="/contact/">Contact Us</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_BH7S" href="/"><img src="/img/logo_white.svg" alt="wgtwo Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="191px" height="32px"><img src="/img/logo_white.svg" alt="wgtwo Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="191px" height="32px"></a></div><div class="footer__copyright">© 2024 Working Group Two AS</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9507be87.js"></script>
<script src="/assets/js/main.e72d4781.js"></script>
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N4969FH" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) --></body>
</html>